<div class="container-fluid bg-light min-vh-100 py-4">
  <!-- æ¨™é¡Œå€ -->
  <header class="text-center mb-4">
    <h1 class="display-4 fw-bold mb-3 title-main">
      <span class="title-year">2025R4</span>
      <span class="mx-2 title-dept">ç”¢å“äºŒéƒ¨</span>
      <p class="title-event">Team Building</p>
    </h1>
    <p class="lead subtitle-text">å‘½é‹è¼ªç›¤ Â· èˆ‡ä½ ç›¸é‡</p>
  </header>

  <!-- ä¸»è¦å…§å®¹å€ -->
  <div class="container">
    <div class="row g-4">
      <!-- å·¦å´:è¼¸å…¥èˆ‡æŠ½é¡Œå€ -->
      <div class="col-lg-6">
        <!-- è¼¸å…¥å¡ç‰‡ -->
        <div class="card shadow-sm mb-4">
          <div class="card-body">
            <div class="mb-3">
              <input
                id="userName"
                type="text"
                [(ngModel)]="inputName"
                placeholder="è¼¸å…¥ä½ çš„è‹±æ–‡åå­—"
                class="form-control form-control-lg"
                [class.is-invalid]="inputName.trim() && !isNameValid()"
                [disabled]="countdown > 0"
              />
              <div class="invalid-feedback d-block" *ngIf="inputName.trim() && !isNameValid()">
                å“å‘€!é€™å€‹åå­—ä¸åœ¨åƒåŠ åå–®ä¸­å–”
              </div>
            </div>

            <button
              class="btn btn-primary btn-lg w-100"
              (click)="drawQuestion()"
              [disabled]="!isNameValid() || isDrawing || countdown > 0"
            >
              <span class="fs-4 me-2">ğŸ²</span>
              {{
                countdown > 0
                  ? "ç­‰å¾…é‡ç½®ä¸­..."
                  : isDrawing
                  ? "æŠ½ç‰Œä¸­..."
                  : "æŠ½ç‰Œå›‰!"
              }}
            </button>
          </div>
        </div>

        <!-- é¡Œç›®å¡ç‰‡ -->
        <div class="card shadow question-display" *ngIf="showQuestion">
          <div class="card-body text-center p-4">
            <h5 class="question-name mb-3">{{ drawnName }} æŠ½åˆ°çš„é¡Œç›®</h5>
            <p class="question-content">{{ drawnQuestion }}</p>
            <div class="countdown-info" *ngIf="countdown > 0">
              {{ countdown }} ç§’å¾Œé‡æ–°å•Ÿå‹•
            </div>
          </div>
        </div>
      </div>

      <!-- å³å´:è¨˜éŒ„åˆ—è¡¨ -->
      <div class="col-lg-6">
        <div class="card shadow-sm">
          <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
            <h5 class="mb-0">æŠ½é¡Œè¨˜éŒ„</h5>
            <span class="badge bg-light text-dark">{{ records.length }} ç­†</span>
          </div>
          <div class="card-body p-0">
            <div class="list-group list-group-flush" style="max-height: 600px; overflow-y: auto;" *ngIf="records.length > 0; else noRecords">
              <div
                class="list-group-item list-group-item-action d-flex gap-3"
                *ngFor="let record of records.slice().reverse()"
              >
                <div class="flex-shrink-0">
                  <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
                       style="width: 48px; height: 48px; font-size: 1.25rem; font-weight: 700;">
                    {{ record.name.charAt(0).toUpperCase() }}
                  </div>
                </div>
                <div class="flex-grow-1">
                  <div class="d-flex justify-content-between align-items-start mb-1">
                    <h6 class="mb-0 fw-bold">{{ record.name }}</h6>
                    <small class="text-muted">{{ record.timestamp | date : "HH:mm" }}</small>
                  </div>
                  <p class="mb-0 text-muted small">{{ record.question }}</p>
                </div>
              </div>
            </div>
            <ng-template #noRecords>
              <div class="text-center py-5 text-muted">
                <p class="mb-0">é‚„æ²’æœ‰äººæŠ½é¡Œå–”!è¶•ç·Šä¾†ç©å§!</p>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
